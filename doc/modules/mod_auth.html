<!-- $Id: mod_auth.html,v 1.5 2012-02-20 18:14:27 castaglia Exp $ -->
<!-- $Source: /home/proftpd-core/backup/proftp-cvsroot/proftpd/doc/modules/mod_auth.html,v $ -->

<html>
<head>
<title>ProFTPD module mod_auth</title>
</head>

<body bgcolor=white>

<hr>
<center>
<h2><b>ProFTPD module <code>mod_auth</code></b></h2>
</center>
<hr><br>

This module is contained in the <code>mod_auth.c</code> file for
ProFTPD 1.3.<i>x</i>, and is compiled by default.

<h2>Directives</h2>
<ul>
  <li><a href="#DefaultRoot">DefaultRoot</a>
  <li><a href="#MaxLoginAttempts">MaxLoginAttempts</a>
  <li><a href="#RootRevoke">RootRevoke</a>
  <li><a href="#TimeoutLogin">TimeoutLogin</a>
  <li><a href="#TimeoutSession">TimeoutSession</a>
  <li><a href="#UserPassword">UserPassword</a>
</ul>

<hr>
<h2><a name="DefaultRoot">DefaultRoot</a></h2>
<strong>Syntax:</strong> DefaultRoot <em>path [group-expression]</em><br>
<strong>Default:</strong> None<br>
<strong>Context:</strong> server config, <code>&lt;VirtualHost&gt;</code>, <code>&lt;Global&gt;</code><br>
<strong>Module:</strong> mod_auth<br>
<strong>Compatibility:</strong> 1.2.0rc1

<p>
The <code>DefaultRoot</code> directive is used to <code>chroot()</code> the
session process for the connecting client.  A fuller explanation can be
found in the <a href="../howto/Chroot.html">Chroot</a> howto.

<p>
<hr>
<h2><a name="MaxLoginAttempts">MaxLoginAttempts</a></h2>
<strong>Syntax:</strong> MaxLoginAttempts <em>count</em><br>
<strong>Default:</strong> 3<br>
<strong>Context:</strong> server config, <code>&lt;VirtualHost&gt;</code>, <code>&lt;Global&gt;</code><br>
<strong>Module:</strong> mod_auth<br>
<strong>Compatibility:</strong> 0.99.0 and later

<p>
The <code>MaxLoginAttempts</code> directive configures the maximum number of
times a client may attempt to authenticate to the server <i>on the same TCP
connection</i>.  After the number of attempts exceeds the configured
<em>count</em>, the client is disconnected and an appropriate message is
logged.

<p>
<hr>
<h2><a name="RootRevoke">RootRevoke</a></h2>
<strong>Syntax:</strong> RootRevoke <em>on|off</em><br>
<strong>Default:</strong> None<br>
<strong>Context:</strong> server config, <code>&lt;VirtualHost&gt;</code>, <code>&lt;Global&gt;</code>, <code>&lt;Anonymous&gt;</code><br>
<strong>Module:</strong> mod_auth<br>
<strong>Compatibility:</strong> 1.2.9rc1 and later

<p>
The <code>RootRevoke</code> directive causes all root privileges to be dropped
once a user is authenticated.  This will also cause active data transfers
(<i>e.g.</i> via the <code>PORT</code>/<code>EPRT</code> FTP commands) to be
disabled <i>if the server is listening on a port less than 1025</i>.  Note that
this only affects <i>active</i> data transfers; passive transfers will not be
blocked.

<p>
<hr>
<h2><a name="TimeoutLogin">TimeoutLogin</a></h2>
<strong>Syntax:</strong> TimeoutLogin <em>seconds</em><br>
<strong>Default:</strong> 300 seconds<br>
<strong>Context:</strong> server config, <code>&lt;VirtualHost&gt;</code>, <code>&lt;Global&gt;</code><br>
<strong>Module:</strong> mod_auth<br>
<strong>Compatibility:</strong> 0.99.0 and later

<p>
The <code>TimeoutLogin</code> directive configures the maximum number of
<em>seconds</em> a client is allowed to spend authenticating, <i>i.e.</i>
from the time when the client connects to the time when the client has
successfully authenticated.  The login timer is <b>not</b> reset when a client
transmits data, and is only removed once a client has transmitted an
acceptable combination of <code>USER</code>/<code>PASS</code> commands.

<p>
See also: <a href="mod_core.html#TimeoutIdle"><code>TimeoutIdle</code></a>,
<a href="mod_xfer.html#TimeoutNoTransfer"><code>TimeoutNoTransfer</code></a>,
<a href="mod_xfer.html#TimeoutStalled"><code>TimeoutStalled</code></a>

<p>
<hr>
<h2><a name="TimeoutSession">TimeoutSession</a></h2>
<strong>Syntax:</strong> TimeoutSessions <em>seconds</em><br>
<strong>Default:</strong> None<br>
<strong>Context:</strong> server config, <code>&lt;VirtualHost&gt;</code>, <code>&lt;Global&gt;</code>, <code>&lt;Anonymous&gt;</code><br>
<strong>Module:</strong> mod_auth<br>
<strong>Compatibility:</strong> 1.2.6rc1 and later

<p>
The <code>TimeoutSession</code> directive sets the maximum number of
<em>seconds</em> a control connection between the proftpd server and client
can exist, after the client has successfully authenticated.  If the
<em>seconds</em> argument is set to zero, sessions are allowed to last
indefinitely; this is the default.

<p>
<hr>
<h2><a name="UserPassword">UserPassword</a></h2>
<strong>Syntax:</strong> UserPassword <em>user encrypted-password</em><br>
<strong>Default:</strong> None<br>
<strong>Context:</strong> server config, <code>&lt;VirtualHost&gt;</code>, <code>&lt;Global&gt;</code>, <code>&lt;Anonymous&gt;</code><br>
<strong>Module:</strong> mod_auth<br>
<strong>Compatibility:</strong> 0.99.0pl5 and later

<p>
The <code>UserPassword</code> directive creates a password for a particular
<em>user</em>; this configured password will <i>override</i> the user's normal
password in <code>/etc/passwd</code> (or whichever auth module handles that
user).  <b>Note</b> that the <em>user</em> configured is a real user, and
<b>not</b> a <code>UserAlias</code>.

<p>
The <em>encrypted-password</em> parameter is a string which has been passed
through the standard Unix <code>crypt(3)</code> function.  <b>Do not use a
cleartext password</b>.  To obtain this <em>encrypted-password</em> value,
you can use the <a href="../utils/ftpasswd.html"><code>ftpasswd</code></a>
script's <code>--hash</code> option, <i>e.g.</i>:
<pre>
  # ftpasswd --hash

  Password: 
  Re-type password: 

  ftpasswd: $1$EsnXxyD6$tsO2YwTAT/Tl5u1NYPHIw1
</pre>

<p>
Example configuration:
<pre>
  # Override user bob's password with a hash version of "password"
  UserPassword bob $1$EsnXxyD6$tsO2YwTAT/Tl5u1NYPHIw1
</pre>

<p>
<hr>
<h2><a name="Installation">Installation</a></h2>
The <code>mod_auth</code> module is compiled by default.

<p>
<hr><br>

Author: <i>$Author: castaglia $</i><br>
Last Updated: <i>$Date: 2012-02-20 18:14:27 $</i><br>

<br><hr>

<font size=2><b><i>
&copy; Copyright 2002-2012<br>
 All Rights Reserved<br>
</i></b></font>

<hr><br>

</body>
</html>
